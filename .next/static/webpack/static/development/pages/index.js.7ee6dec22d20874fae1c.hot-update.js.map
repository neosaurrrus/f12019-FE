{"version":3,"file":"static/webpack/static/development/pages/index.js.7ee6dec22d20874fae1c.hot-update.js","sources":["webpack:///./components/AddDriver.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport {graphql, compose} from 'react-apollo'\r\nimport {CREATE_DRIVER_MUTATION, GET_DRIVERS_QUERY, GET_TEAMS_QUERY} from '../queries/queries'\r\n\r\n\r\n\r\nclass AddDriver extends Component {\r\n\r\n    state = {\r\n        firstName: '',\r\n        lastName: '',\r\n        nationality:'',\r\n        teamId:'null'\r\n    }\r\n\r\n    showTeams(){\r\n        let data = this.props.GET_TEAMS_QUERY\r\n        if(data.loading){\r\n            return (<option disabled>Loading Teams...</option>)\r\n        } else {\r\n            return data.teams.map(team => {\r\n                return (<option name=\"teamId\" key={team.id} value={team.id}>{team.name}</option>)\r\n            })\r\n        }\r\n    }\r\n\r\n    handleChange = ((event) =>{\r\n        const{name, value} = event.target\r\n        this.setState({[name]: value})\r\n    });\r\n\r\n    submitForm = (event) =>{\r\n        event.preventDefault();\r\n        if (this.state.teamId === null) { this.setState({ teamId: data.teams[0].teamId })}\r\n        this.props.CREATE_DRIVER_MUTATION({\r\n            variables:{\r\n                firstName: this.state.firstName,\r\n                lastName: this.state.lastName,\r\n                nationality: this.state.nationality,\r\n                teamId: this.state.teamId\r\n            },\r\n            refetchQueries: [{query: GET_DRIVERS_QUERY}]\r\n        })  \r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n          <form id=\"add-driver\"onSubmit= {this.submitForm}>\r\n            <div className=\"field\">\r\n              <label>First Name:</label>\r\n                <input type=\"text\" name=\"firstName\" onChange={this.handleChange}/>\r\n            </div>\r\n            <div className=\"field\">\r\n                <label>Last Name:</label>\r\n                    <input name=\"lastName\" type=\"text\" onChange={this.handleChange}/>\r\n            </div>\r\n            <div className=\"field\">\r\n                <label>Nationality:</label>\r\n                    <input name=\"nationality\" type=\"text\" onChange={this.handleChange}/>\r\n            </div>\r\n            <div className=\"field\">\r\n                <label>Team</label>\r\n                    <select defaultValue=\"Select a Team\" onChange={ (e) => {this.setState({teamId:e.target.value})}}>\r\n                    {this.showTeams()}\r\n                </select>\r\n            </div>\r\n            <button>Add</button>\r\n          </form>\r\n        );\r\n    }\r\n}\r\n\r\nexport default compose(\r\n    graphql(GET_TEAMS_QUERY, {name:\"GET_TEAMS_QUERY\"}),\r\n    graphql(CREATE_DRIVER_MUTATION, {name:\"CREATE_DRIVER_MUTATION\"}),\r\n)(AddDriver);"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAGA;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AACA;AAJA;AACA;AAiBA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AAAA;AAAA;AAPA;AASA;AACA;;;;;;AA7BA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;AAsBA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;AAhEA;AACA;AAkEA;AACA;AAAA;AACA;AAAA;;;;A","sourceRoot":""}